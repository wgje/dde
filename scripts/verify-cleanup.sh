#!/bin/bash
# 代码清理验证脚本
# 运行此脚本验证清理后项目状态

set -e

echo "================================================"
echo "NanoFlow 代码清理验证"
echo "================================================"
echo ""

echo "1️⃣  安装依赖..."
npm install --silent

echo "2️⃣  验证构建..."
npm run build 2>&1 | tail -5

echo "3️⃣  运行测试..."
npm run test:run 2>&1 | tail -10

echo "4️⃣  运行 knip 检测剩余未使用代码..."
npx knip 2>&1 | head -50

echo ""
echo "================================================"
echo "验证完成！"
echo "================================================"
echo ""
echo "如果以上步骤都成功，清理验证通过。"
echo "如有失败，请检查 docs/DELETION_LOG.md 并回滚相关更改。"
